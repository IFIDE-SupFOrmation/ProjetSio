{"version":3,"file":"app.js","sources":["app/app.js"],"sourcesContent":["var webApp = angular.module(\"webApp\", [\"ui.router\",\"ui.bootstrap\",\"smart-table\",\"ngAnimate\",\"toastr\",\"restangular\",\"ui.calendar\"]);\r\n\r\n//TO DO : prendre ces constantes du serveur\r\nwebApp.constant(\"USERS_ROLES\", {\r\n    administrateur: \"administrateur\",\r\n    planificateur: \"planificateur\",\r\n    enseignant: \"enseignant\"\r\n});\r\n\r\n// Déclaration des constantes pour les évènements de login\r\nwebApp.constant(\"AUTH_EVENTS\", {\r\n    loginSuccess: \"auth-loginSuccess\",\r\n    loginFailed: \"auth-loginFailed\",\r\n    logoutSuccess: \"auth-logoutSuccess\",\r\n    sessionTimeout: \"auth-sessionTimeout\",\r\n    notAuthenticated: \"auth-notAuthenticated\",\r\n    notAuthorized: \"auth-notAuthorized\"\r\n});\r\n\r\n// Constante pour lien backend\r\nwebApp.constant(\"BACKEND_URL\", \"./backend/\");\r\n\r\n//Config de toastr\r\nwebApp.config(function (toastrConfig) {\r\n    angular.extend(toastrConfig, {\r\n        positionClass: \"toast-bottom-right\",\r\n        //Limité à un à cause de la mise à jour 1.4.7 d'angular-animate\r\n        maxOpened: 1\r\n    });\r\n});\r\n\r\n// Rajout d'un intercepteur de toutes les requêtes http pour vérifier le login\r\nwebApp.config(function($httpProvider) {\r\n    $httpProvider.interceptors.push([\r\n        \"$injector\",\r\n        function($injector) {\r\n            return $injector.get(\"AuthInterceptor\");\r\n        }\r\n    ]);\r\n});\n// test : function checkant le statut de la session à chaque changement de state\r\nwebApp.run(function($rootScope, $state, Authentification, AUTH_EVENTS) {\r\n\r\n\t$rootScope.$on(\"$stateChangeStart\", function (event, next) {\r\n        if(next.name != \"activation\" && next.name != \"annee\"){\r\n            var authorizedRoles = next.data.authorizedRoles;\r\n            if (!Authentification.isAuthorized(authorizedRoles)) {\r\n                event.preventDefault();\r\n                if (Authentification.isAuthenticated()) {\r\n                    // user non autorisé\r\n                    $rootScope.$broadcast(AUTH_EVENTS.notAuthorized);\r\n                } \r\n                else {\r\n                    // user pas connecté\r\n                    $rootScope.$broadcast(AUTH_EVENTS.notAuthenticated);\r\n                }\r\n            }\r\n        }\r\n\t  });\r\n\t\r\n\t// test pour navbar, à revoir\r\n\t$rootScope.getClass = function(path) {\r\n\t\tif ($state.current.name == path) {\r\n\t\t\treturn \"actif\";\r\n\t\t} else {\r\n\t\t\treturn \"\";\r\n\t\t}\r\n\t}\r\n\t\r\n\t$rootScope.logout = function(){\r\n\t\tAuthentification.logout();\r\n\t};\r\n\r\n});\n//Ici on utilise la méthode config pour déclarer le routage de l'application\r\nwebApp.config(function($stateProvider, $urlRouterProvider, RestangularProvider, USERS_ROLES, BACKEND_URL) {\r\n\r\n//Mise en place de l'url de base pour restangular\r\n    RestangularProvider.setBaseUrl(BACKEND_URL);\r\n\r\n\r\n//Cette ligne force toute les routes autres que celles déclarées vers \"/\"\r\n    $urlRouterProvider.otherwise(\"/\");\r\n\r\n// NOTA BENE : ui-router utilise la terminologie \"state\" à la place de \"route\", mais le principe de base reste le même\r\n\r\n//déclaration des states ( ou routes)\r\n    $stateProvider\r\n        //D'abord on déclare le nom du state\r\n        .state(\"accueil\", {\r\n            //Puis on crée la liaison avec un url \r\n            url: \"/\",\r\n            //Ensuite on indique le template utilisé \r\n            templateUrl: \"views/accueil.html\",\r\n            data: {\r\n                authorizedRoles: [USERS_ROLES.administrateur, USERS_ROLES.planificateur, USERS_ROLES.enseignant]\r\n            }\r\n        })\r\n\r\n        .state(\"annee\", {\r\n            url: \"/annee\",\r\n            templateUrl: \"views/public/listeAnnee.html\",\r\n            controller: \"PlanAnneeController\"\r\n        })\r\n\r\n        //Page activation de compte\r\n        .state(\"activation\", {\r\n            url: \"/activation/:id/:token\",\r\n            templateUrl: \"views/activation.html\",\r\n            controller: \"ActivationController\",\r\n            resolve: {\r\n                id: function($stateParams) {\r\n                    return $stateParams.id;\r\n                },\r\n                token: function($stateParams) {\r\n                    return $stateParams.token;\r\n                }\r\n            }\r\n        })\r\n\r\n        //Page de profil\r\n        .state(\"profil\", {\r\n            url: \"/profil\",\r\n            templateUrl: \"views/profil.html\",\r\n            controller: \"ProfilController\",\r\n            data: {\r\n                authorizedRoles: [USERS_ROLES.administrateur, USERS_ROLES.planificateur, USERS_ROLES.enseignant]\r\n            }\r\n        })\r\n\r\n        //Partie Administrateur\r\n        .state(\"administration\", {\r\n            url: \"/administration\",\r\n            templateUrl: \"views/administration/administration.html\",\r\n            controller: \"AdminController\",\r\n            data: {\r\n                authorizedRoles: [USERS_ROLES.administrateur]\r\n            }\r\n        })\r\n\r\n        //Partie Planificateur\r\n        .state(\"planification\", {\r\n            url: \"/planification\",\r\n            templateUrl: \"views/planification/navigation.html\",\r\n            controller: \"planificationController\",\r\n            data: {\r\n                authorizedRoles: [USERS_ROLES.planificateur]\r\n            }\r\n        })\r\n        .state(\"planification.classes\", {\r\n            url: \"/classes\",\r\n            templateUrl: \"views/planification/listeClasses.html\",\r\n            controller: \"PlanClassesController\",\r\n            data: {\r\n                authorizedRoles: [USERS_ROLES.planificateur]\r\n            }\r\n        })\r\n        .state(\"planification.matieres\", {\r\n            url: \"/matieres\",\r\n            templateUrl: \"views/planification/matieres.html\",\r\n            controller: \"PlanMatieresController\",\r\n            data: {\r\n                authorizedRoles: [USERS_ROLES.planificateur]\r\n            }\r\n        })\r\n        .state(\"planification.enseignants\", {\r\n            url: \"/enseignants\",\r\n            templateUrl: \"views/planification/listeEnseignants.html\",\r\n            controller: \"PlanEnseignantsController\",\r\n            data: {\r\n                authorizedRoles: [USERS_ROLES.planificateur]\r\n            }\r\n        })\r\n        .state(\"planification.calendar\", {\r\n            url: \"/periodes/:id\",\r\n            templateUrl: \"views/planification/calendar.html\",\r\n            controller: \"PlanCalendar\",\r\n            resolve: {\r\n                id: function($stateParams) {\r\n                    return $stateParams.id;\r\n                }\r\n            },\r\n            data: {\r\n                authorizedRoles: [USERS_ROLES.planificateur]\r\n            }\r\n        })\r\n\r\n        //Partie Enseignant\r\n        .state(\"enseignement\", {\r\n            url: \"/enseignement\",\r\n            templateUrl: \"views/enseignement/navigation.html\",\r\n            data: {\r\n                authorizedRoles: [USERS_ROLES.enseignant]\r\n            }\r\n        })\r\n        .state(\"enseignement.cours\", {\r\n            url: \"/cours\",\r\n            templateUrl: \"views/enseignement/cours.html\",\r\n            controller: \"EnsCoursController\",\r\n            data: {\r\n                authorizedRoles: [USERS_ROLES.enseignant]\r\n            }\r\n        })\r\n        .state(\"enseignement.indisponibilites\", {\r\n            url: \"/indisponibilites\",\r\n            templateUrl: \"views/enseignement/indisponibilites.html\",\r\n            controller: \"indisposController\",\r\n            data: {\r\n                authorizedRoles: [USERS_ROLES.enseignant]\r\n            }\r\n        })\r\n        .state(\"enseignement.calendar\", {\r\n            url: \"/calendar\",\r\n            templateUrl: \"views/enseignement/calendar.html\",\r\n            controller: \"EnsCalendarController\",\r\n            data: {\r\n                authorizedRoles: [USERS_ROLES.enseignant]\r\n            }\r\n        });\r\n});\nwebApp.controller(\"ActivationController\",\r\n\tfunction($scope, serviceActivation, id, token) {\r\n    \r\n    $scope.user = {};\r\n    $scope.user.id = id;\r\n    $scope.activation = {};\r\n    \r\n    serviceActivation.Activation(id,token).then(function(bool){\r\n        if (bool == 1)\r\n            $scope.activation.message = \"Votre compte a bien été activé\";\r\n        else\r\n            $scope.activation.message = \"Il y a eu un problème lors de l'activation\";\r\n    },function(){\r\n        $scope.activation.message = \"Il y a eu un problème lors de l'activation\";\r\n    });\r\n    \r\n    $scope.submit = function(user){\r\n        serviceActivation.SetFirstPassword(user).then(function(bool){\r\n            if (bool == 1)\r\n                $scope.creationMdp = true;\r\n                $scope.form.message = \"Le mot de passe a été créé correctement, vous pouvez vous connectez avec le lien en haut à droite\"\r\n        })\r\n    }\r\n});\n//Dans ce fichier on va mettre en place les différents controllers qui seront liés à la view\r\n// Il faut voir ça comme des sections de codes seulement accessibles dans la zone html où elles sont déclarées\r\n\r\n// Un paramètre qui reviendra constamment est $scope, il faut le voir comme un \"sac à variables\" que l'on va\r\n// par suite utiliser dans notre html \r\n\r\n\r\n//controller du modal de login\r\nwebApp.controller(\"loginController\",\r\n\tfunction($scope, $state, $uibModalInstance, $window, Authentification ) {\r\n\t$scope.user = {};\r\n\t$scope.form = {};\r\n\t$scope.error = false;\r\n\t\r\n\t//fonction qui vérifie si le form est valide\r\n\t$scope.submit = function() {\r\n\t\t$scope.submitted = true;\r\n\t\tif (!$scope.form.$invalid) {\r\n\t\t\t$scope.login($scope.user);\r\n\t\t} else {\r\n\t\t\t$scope.error = true;\r\n\t\t\treturn;\r\n\t\t}\r\n\t};\r\n\r\n\t//Fonction utilisant la fonction login de la factory authenfication\r\n\t$scope.login = function(user) {\r\n\t\t$scope.error = false;\r\n\t\tAuthentification.login(user, function(user) {\r\n\t\t\t//2ème paramètre = fonction de succès\r\n\t\t\t$uibModalInstance.close();\r\n\t\t\tif (user)\r\n\t\t\t    $state.go(user.home);\r\n\t\t}, function() {\r\n\t\t\t//3ème paramètre fonction d'echec\r\n\t\t    $scope.errorMessage = \"Le serveur n'a pas accepté vos identifiants\";\r\n\t\t\t$scope.error = true;\r\n\t\t});\r\n\t};\r\n\t\r\n\t// Check au début si l'utilisateur a déjà une sesssion en cours (au cas d'un refresh)\r\n\tif ($window.sessionStorage[\"userData\"]) {\r\n\t\ttry {\r\n\t\tvar user = JSON.parse($window.sessionStorage[\"userData\"]);\r\n\t\t$scope.login(user);\t\r\n\t\t} catch (error) {}\t\t\r\n\t}\r\n\r\n});\nwebApp.controller(\"mainController\", function ($scope, $rootScope, $uibModal, Authentification, Session, AUTH_EVENTS, USERS_ROLES) {\r\n\r\n    $scope.navCollapsed = true;\r\n\r\n\t$scope.modalShown = false;\r\n    \r\n\tvar showLogin = function() {\r\n\t\tif(!$scope.modalShown){\r\n\t\t\t$scope.modalShown = true;\r\n\t\t\tvar modalInstance = $uibModal.open({\r\n\t\t\t\ttemplateUrl : \"modals/login.html\",\r\n\t\t\t\tcontroller : \"loginController\",\r\n\t\t\t\tbackdrop : \"static\"\r\n\t\t\t});\r\n\r\n\t\t\tmodalInstance.result.then(function() {\r\n\t\t\t\t$scope.modalShown = false;\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\t\r\n\tvar setCurrentUser = function(){\r\n\t\t$scope.currentUser = Session;\r\n\t}\r\n\t\r\n\tvar showNotAuthorized = function(){\r\n\t\talert(\"Zone non autorisé\");\r\n\t}\r\n\t\r\n    $scope.login = function(){\r\n\t\tshowLogin();\r\n\t}\r\n    \r\n\t$scope.logout = function(){\r\n\t\tAuthentification.logout();\r\n\t}\r\n\t\r\n\t$scope.currentUser = null;\r\n\t$scope.userRoles = USERS_ROLES;\r\n\t$scope.isAuthorized = Authentification.isAuthorized;\r\n\r\n\t//Rajout des listeners pour les évenements de login\r\n\t$rootScope.$on(AUTH_EVENTS.notAuthorized, showNotAuthorized);\r\n\t$rootScope.$on(AUTH_EVENTS.notAuthenticated, showLogin);\r\n\t$rootScope.$on(AUTH_EVENTS.sessionTimeout, showLogin);\r\n\t$rootScope.$on(AUTH_EVENTS.logoutSuccess, showLogin);\r\n\t$rootScope.$on(AUTH_EVENTS.loginSuccess, setCurrentUser);\r\n\t\r\n});\nwebApp.controller(\"ProfilController\",\r\n\tfunction ($scope, $rootScope, profilService, Session, themes) {\r\n\r\n\t    $scope.emails = {};\r\n\t    $scope.passwords = {};\r\n\r\n\t    $scope.isSavedEmail = false; \r\n\t    $scope.isSavingEmail = false;\r\n\r\n\t    $scope.isSavingPassword = false;\r\n\t    $scope.isSavedPassword = false;\r\n\r\n\t    $scope.user = Session;\r\n\r\n\t    $scope.saveEmail = function() {\r\n\t        $scope.isSavingEmail = true;\r\n\t        profilService.changeEmail($scope.emails).then(function() {\r\n\t            $scope.isSavingEmail = false;\r\n\t            $scope.isSavedEmail = true;\r\n\t        }, function (message) {\r\n\t            $scope.isSavingEmail = false;\r\n\t            $scope.errorEmail = message;\r\n\t        });\r\n\t    };\r\n\r\n\t    $scope.savePassword = function () {\r\n\t        $scope.isSavingPassword = true;\r\n\t        profilService.changePassword($scope.passwords).then(function () {\r\n\t            $scope.isSavingPassword = false;\r\n\t            $scope.isSavedPassword = true;\r\n\t        }, function (message) {\r\n\t            $scope.isSavingPassword = false;\r\n\t            $scope.errorPassword = message;\r\n\t        });\r\n\t    }\r\n        \r\n        $scope.changeTheme = function(choice){\r\n          themes.select(choice);  \r\n        };\r\n        $scope.changeButton = function(choice){\r\n            themes.selectButton(choice);\r\n        }\r\n\t});\n//Ce filtre récupère chaque instance unique d'une valeur dans un tableau\r\n// Cela permet d'avoir un dropdown comme filtre avec tous les choix possibles selon les données du tableau ( C'est dynamique! O_O ) \r\nwebApp.filter(\"unique\", function() {\r\n    return function (array, champ) {\r\n        var o = {}, i, l = array.length, r = [];\r\n        for(i=0; i<l;i+=1) {\r\n            o[array[i][champ]] = array[i];\r\n        }\r\n        for(i in o) {\r\n            r.push(o[i]);\r\n        }\r\n        return r;\r\n    };\r\n  })\nwebApp.factory(\"serviceActivation\",\r\n\tfunction(Restangular){\r\n\t\treturn {\r\n\t\t\tActivation: function(id,token){\r\n\t\t\t\treturn Restangular.one(\"activation\",id).one(\"token\",token).get();\r\n\t\t\t},\r\n            SetFirstPassword: function(user){\r\n\t\t\t\treturn Restangular.all(\"set_firstpassword\").post(user);\r\n\t\t\t},\r\n\t\t}\r\n\t})\nwebApp.factory(\"helper\", function () {\r\n    return {\r\n\r\n        //Permet de récupérer l'objet d'un array par son id en indiquant le nom de la propriété par laquelle\r\n        // il faut itérer.\r\n        getObjectFromArray: function (arr, property , id) {\r\n            var result = arr.filter(function (o) { return o[property] == id; });\r\n            return result ? result[0] : null;\r\n        },\r\n\r\n        deleteObjectFromArray: function(arr, property, id) {\r\n            return arr.filter(function (o) { return o[property] != id; });\r\n        },\r\n\r\n        getObjectFromDateInArray: function(arr, property, date) {\r\n            var result = arr.filter(function (o) { return moment(o[property]).isSame(date,\"day\"); });\r\n            return result ? result[0] : null;\r\n        },\r\n\r\n        getPeriodFromDateInArray: function (arr, date) {\r\n            var resultFiltered = arr.filter(function (o) { return moment(date).isBetween(o[\"start\"],o[\"end\"]); });\r\n            return resultFiltered ? resultFiltered[0] : null;\r\n        }\r\n    }\r\n});\nwebApp.factory(\"initializers\", function(matieresService, classesService, enseignantsService) {\r\n\r\n    function planification() {\r\n        matieresService.updateList();\r\n        classesService.updateList();\r\n        enseignantsService.updateList();\r\n    }\r\n\r\n    return {\r\n        planification: planification\r\n    }\r\n});\nwebApp.factory(\"serviceMatieres\",\r\n\tfunction(Restangular){\r\n\t\treturn {\r\n\t\t\tgetMatieres: function(){\r\n\t\t\t\treturn Restangular.all(\"matieres\").getList();\r\n\t\t\t},\r\n\t\t}\r\n\t})\nwebApp.factory(\"notifService\", function (toastr) {\r\n\r\n    function saving() {\r\n        toastr.clear();\r\n        toastr.info(\"Sauvegarde en cours...\");\r\n    };\r\n\r\n    function saved() {\r\n        toastr.clear();\r\n        toastr.success(\"Sauvegarde terminée!\");\r\n    };\r\n\r\n    function deleting() {\r\n        toastr.clear();\r\n        toastr.info(\"Suppression en cours...\");\r\n    };\r\n\r\n    function deleted() {\r\n        toastr.clear();\r\n        toastr.success(\"Suppression terminée!\");\r\n    };\r\n\r\n    function sending() {\r\n        toastr.clear();\r\n        toastr.info(\"Envoi des assignations en cours...\");\r\n    };\r\n\r\n    function sent() {\r\n        toastr.clear();\r\n        toastr.success(\"Assignations envoyées!\");\r\n    };\r\n    function error(message) {\r\n        toastr.clear();\r\n        toastr.error(message,\"Erreur\");\r\n    };\r\n\r\n    return {\r\n        saving: saving,\r\n        saved: saved,\r\n        deleting: deleting,\r\n        deleted: deleted,\r\n        error: error,\r\n        sending: sending,\r\n        sent: sent\r\n    }\r\n});\nwebApp.factory(\"profilService\", function ($q, Restangular) {    \r\n    return {\r\n        changePassword : function(passwords) {\r\n            return $q(function(resolve, reject) {\r\n                Restangular.one(\"changePassword\").doPOST(passwords).then(function() {\r\n                    resolve(\"ok\");\r\n                },function() {\r\n                    reject(\"Il y a eu un probl�me sur le serveur\");\r\n                });\r\n            });\r\n        },\r\n        changeEmail: function (emails) {\r\n            return $q(function (resolve, reject) {\r\n                Restangular.one(\"changeEmail\").doPOST(emails).then(function () {\r\n                    resolve(\"ok\");\r\n                }, function () {\r\n                    reject(\"Il y a eu un probl�me sur le serveur\");\r\n                });\r\n            });\r\n        }\r\n    };\r\n});\nwebApp.factory(\"serviceRoles\",\r\n\tfunction(Restangular){\r\n\t\treturn {\r\n\t\t\tgetRoles: function(){\r\n\t\t\t\treturn Restangular.all(\"roles\").getList();\r\n\t\t\t},\r\n\t\t}\r\n\t})\n//Session utilisateur Javascript ( garder au chaud dans la session du navigateur par la factory Authentification)\r\nwebApp.service(\"Session\", function($rootScope, USERS_ROLES) {\r\n\r\n\tthis.create = function(user) {\r\n\t\tthis.user = user.name;\r\n\t\tthis.firstName = user.firstName;\r\n\t\tthis.lastName = user.lastName;\r\n\t\tthis.roles = user.roles;\r\n\t\tthis.token = user.token;\r\n\t\tthis.home = user.home;\r\n\t\tthis.id = user.id;\r\n\t\tthis.email = user.email;\r\n        this.theme = user.theme;\r\n        $rootScope.theme = user.theme; \r\n\t};\r\n\tthis.destroy = function() {\r\n\t\tthis.user = null;\r\n\t\tthis.firstName = null;\r\n\t\tthis.lastName = null;\r\n\t\tthis.roles = null;\r\n\t\tthis.token = null;\r\n\t\tthis.home = null;\r\n\t\tthis.id = null;\r\n\t    this.email = null;\r\n        this.theme = null;\r\n\t};\r\n\treturn this;\r\n});\r\n\r\n\r\n\nwebApp.factory(\"themes\", function ($rootScope, $state, notifService, Restangular) {    \r\n    \r\n    $rootScope.themes = {\r\n        \"cerulean\" : \"https://maxcdn.bootstrapcdn.com/bootswatch/3.3.6/cerulean/bootstrap.min.css\",\r\n        \"cosmo\" : \"https://maxcdn.bootstrapcdn.com/bootswatch/3.3.6/cosmo/bootstrap.min.css\",\r\n        \"cyborg\" : \"https://maxcdn.bootstrapcdn.com/bootswatch/3.3.6/cyborg/bootstrap.min.css\",\r\n        \"darkly\" : \"https://maxcdn.bootstrapcdn.com/bootswatch/3.3.6/darkly/bootstrap.min.css\",\r\n        \"flatly\": \"https://maxcdn.bootstrapcdn.com/bootswatch/3.3.6/flatly/bootstrap.min.css\",\r\n        \"journal\": \"https://maxcdn.bootstrapcdn.com/bootswatch/3.3.6/journal/bootstrap.min.css\",\r\n        \"lumen\": \"https://maxcdn.bootstrapcdn.com/bootswatch/3.3.6/lumen/bootstrap.min.css\",\r\n        \"paper\": \"https://maxcdn.bootstrapcdn.com/bootswatch/3.3.6/paper/bootstrap.min.css\",\r\n        \"readable\": \"https://maxcdn.bootstrapcdn.com/bootswatch/3.3.6/readable/bootstrap.min.css\",\r\n        \"sandstone\": \"https://maxcdn.bootstrapcdn.com/bootswatch/3.3.6/sandstone/bootstrap.min.css\",\r\n        \"simplex\": \"https://maxcdn.bootstrapcdn.com/bootswatch/3.3.6/simplex/bootstrap.min.css\",\r\n        \"slate\": \"https://maxcdn.bootstrapcdn.com/bootswatch/3.3.6/slate/bootstrap.min.css\",\r\n        \"spacelab\": \"https://maxcdn.bootstrapcdn.com/bootswatch/3.3.6/spacelab/bootstrap.min.css\",\r\n        \"superhero\": \"https://maxcdn.bootstrapcdn.com/bootswatch/3.3.6/superhero/bootstrap.min.css\",\r\n        \"united\": \"https://maxcdn.bootstrapcdn.com/bootswatch/3.3.6/united/bootstrap.min.css\",\r\n        \"yeti\": \"https://maxcdn.bootstrapcdn.com/bootswatch/3.3.6/yeti/bootstrap.min.css\"\r\n    }   \r\n    \r\n    function select(choice){\r\n        notifService.saving();\r\n        Restangular.all(\"theme\").post({ theme: choice}).then(function(){\r\n            notifService.saved();\r\n            $rootScope.theme = choice;\r\n        },function(){\r\n            notifService.error(\"Votre choix n'a pas été sauvegardé\");\r\n        });\r\n    }\r\n    \r\n    return {\r\n        select:select\r\n    };\r\n});\n//Ce controller utilise le service AdminController ainsi que le service pré-installé $filter ET le paramètre passé par l'URL\r\n// pour récupérer un utilisateur en particulier\r\nwebApp.controller(\"AdminDetails\",\r\n\tfunction($scope, $timeout, $uibModalInstance,  adminService, personne, serviceRoles, Restangular){\r\n\t\t\r\n\t    $scope.personne = {};\r\n\t\t$scope.roles = {};\r\n\t\t$scope.formRoles = {};\r\n\t    $scope.creation = personne ? false : true;\r\n\r\n\t    serviceRoles.getRoles().then(function(roles) {\r\n\t        $scope.roles = roles;\r\n\t    });\r\n\r\n\t\tif (personne === -1) {\r\n\t\t\t$scope.creation = true;\r\n            listeners();\r\n\t\t}\r\n\t\telse {\r\n\t\t\tadminService.getOne(personne.id).then(function (personne) {\r\n\t\t\t\tRestangular.copy(personne, $scope.personne);\r\n\r\n\t\t\t    angular.forEach(personne.roles, function(role) {\r\n\t\t\t        $scope.formRoles[role.id] = true;\r\n\t\t\t    }, this);\r\n\t\t\t});\r\n            listeners();\r\n\t\t}\r\n\t\t\t\r\n\t\t// Fonctions\r\n        \r\n        function listeners() {\r\n            $scope.$watch(function () {\r\n                return $scope.personne.firstName;   \r\n            },function(){\r\n                if ($scope.personne.firstName != undefined && $scope.personne.lastName != undefined)\r\n                    changeLogin();\r\n            }, true);\r\n            \r\n            $scope.$watch(function () {\r\n                return $scope.personne.lastName;   \r\n            },function(){\r\n                if ($scope.personne.firstName != undefined && $scope.personne.lastName != undefined)\r\n                    changeLogin();\r\n            }, true);\r\n            \r\n            $scope.$watch(function () {\r\n                return $scope.formRoles;\r\n            }, function (value) {\r\n                $scope.personne.roles = [];\r\n                angular.forEach($scope.formRoles, function (v, k) {\r\n                    v && $scope.personne.roles.push(getRolesById(k));\r\n                });\r\n            }, true);\r\n        }\r\n\t\t// Fonctions\r\n\t\tfunction getRolesById(id) {\r\n\t\t\tfor (var i = 0; i < $scope.roles.length; i++) {\r\n\t\t\t\tif ($scope.roles[i].id == id) {\r\n\t\t\t\t\treturn $scope.roles[i];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n        function changeLogin(){\r\n            $scope.personne.login = $scope.personne.firstName.substring(0,1).toLowerCase() + $scope.personne.lastName.toLowerCase();\r\n        }\r\n\r\n        if(!$scope.creation){\r\n            adminService.getOne(personne.id).then(function (data) {\r\n                $scope.personne = data;\r\n            });\r\n        }\r\n        else {\r\n            $scope.personne = adminService.getNew();\r\n        }\r\n        \r\n\t\t$scope.save = function () {\r\n\t\t    $scope.personne.toDelete = false;\r\n            $uibModalInstance.close($scope.personne);\r\n\t\t};\r\n        \r\n        $scope.remove = function () {\r\n            $scope.personne.toDelete = true;\r\n            $uibModalInstance.close($scope.personne);\r\n\t\t};\r\n        \r\n\t\t$scope.cancel = function () {\r\n\t\t\t$uibModalInstance.dismiss(\"Annuler\");\r\n\t\t};        \r\n\t});\n//Ce controller utilise le service AdminController pour récupérer une liste des utilisateurs du serveur\r\nwebApp.controller(\"AdminController\",\r\n\tfunction($scope, $uibModal, Restangular, adminService){\r\n        \r\n\t\t$scope.personnes = [];\r\n\r\n\t    adminService.getList().then(function(data) {\r\n\t        $scope.personnes = data;\r\n\t        $scope.personnesView = [].concat($scope.personnes);\r\n\t    });\r\n\t\t\r\n\t\tupdateTable();\r\n\t\t$scope.openDetails = function (personne) {\r\n\t\t\t//Il faut mettre l'idList dans $scope pour qu'il soit accessible dans resolve:\r\n\t\t\t$scope.personne = personne;\r\n\r\n\t\t\tvar modalDetails = $uibModal.open({\r\n\t\t\t\tanimation: true,\r\n\t\t\t\ttemplateUrl: \"modals/personnesDetails.html\",\r\n\t\t\t\tcontroller: \"AdminDetails\",\r\n\t\t\t\tsize: \"md\",\r\n\t\t\t\tresolve: {\r\n\t\t\t\t\tpersonne: function () {\r\n\t\t\t\t\t\treturn $scope.personne;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tmodalDetails.result.then(function (personneP) {\r\n                if (personneP.toDelete) {\r\n                    $scope.remove(personneP);\r\n                } else {\r\n                    adminService.save(personneP).then(function () {\r\n                        updateTable();\r\n                    });\r\n                }\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\t$scope.remove = function (personne) {\r\n\t\t    adminService.remove(personne).then(function() {\r\n\t\t        updateTable();\r\n\t\t    });\r\n\t\t};\r\n\r\n\t\tfunction updateTable() {\r\n\t\t    adminService.updateList().then(function () {\r\n\t\t        adminService.getList().then(function(personnes) {\r\n\t\t\t\t\tRestangular.copy(personnes, $scope.personnes);\r\n\t\t\t\t\t$scope.personnesView = [].concat($scope.personnes);\r\n\t\t        });\t        \r\n\t\t    });\r\n\t\t}\r\n\r\n\t\t$scope.changeState = function (personne) {\r\n\t\t    adminService.getOne(personne.id).then(function(per) {\r\n\t\t        per.enabled = personne.enabled == '1' ? 0 : 1;\r\n\t\t        per.save();\r\n\t\t        updateTable();\r\n\t\t    });\r\n\t\t};\r\n\t});\nwebApp.controller(\"EnsCalendarController\",\r\n\tfunction ($scope, ensCalendarService) {\r\n\t    $scope.calendarConfig = ensCalendarService.calendarConfig;\r\n\t    $scope.eventSources = ensCalendarService.eventSources;\r\n});\nwebApp.controller(\"EnsCoursController\",\r\n\tfunction ($scope, $window, Session, ensCours, Restangular, BACKEND_URL) {\r\n\r\n\t    $scope.id = Session.id;\r\n\t\t$scope.host = $window.location.hostname;\r\n\t\t$scope.BACKEND_URL = BACKEND_URL;\r\n\t\t$scope.cours = [];\r\n\r\n\t\tupdateTable();\r\n\r\n\t\tfunction updateTable() {\r\n\t\t\tensCours.getCours().then(function (cours) {\r\n\t\t\t    angular.forEach(cours, function(element) {\r\n\t\t\t        element.periode = moment(element.start).hour() == 8 ? \"matin\" : \"après-midi\";\r\n\t\t\t        element.date = moment(element.start).format(\"DD-MM-YYYY\");\r\n\t\t\t    });\r\n\t\t\t\tRestangular.copy(cours, $scope.cours);\r\n\t\t\t\t$scope.coursView = [].concat($scope.cours);\r\n\t\t\t});\r\n\t\t}       \r\n\t});\nwebApp.controller(\"indisposController\",\r\n\tfunction ($scope, ensCalendarService, indispoService) {\r\n\r\n        //Initialisation\r\n\t    $scope.isLoading = true;\r\n\t    $scope.error = \"\";\r\n\t    $scope.isModified = indispoService.listModified();\r\n\r\n\t    $scope.calendarConfig = ensCalendarService.calendarConfig;\r\n\t    $scope.eventSource = [];\r\n\r\n\t    update();\r\n\r\n        //Fonctions pour boutons\r\n\t    $scope.addPeriod = function () {\r\n\t        indispoService.openPeriodeModal();\r\n\t    }\r\n\r\n\t    $scope.saveChanges = function() {\r\n\t        indispoService.updateIndispos();\r\n\t    }\r\n\r\n\t    $scope.cancelChanges = function () {\r\n\t        update();\r\n\t    }\r\n\r\n        //fonction mettant à jour liste client avec liste serveur\r\n        function update() {\r\n            indispoService.getServerIndispos().then(function () {\r\n                $scope.isLoading = false;\r\n            }, function () {\r\n                $scope.error = \"Il y a eu une erreur avec le serveur.\";\r\n            });\r\n        }\r\n\r\n        //Watch sur listModified pour faire apparaitre les boutons sauvegarde/cancel\r\n        //A Refaire avec emit/on pour limiter l'overhead\r\n\t    $scope.$watch(function () { return indispoService.listModified() },\r\n            function (newValue, oldValue) {\r\n\t        if (newValue !== oldValue) {\r\n\t            $scope.isModified = indispoService.listModified();\r\n\t        }\r\n\t    });\r\n\t});\nwebApp.controller(\"periodeModal\",\r\n    function($scope, indispo, $uibModalInstance) {\r\n\r\n        $scope.indispo = indispo;\r\n        if (!indispo.isNew) {\r\n            $scope.indispo.start = moment($scope.indispo.start).startOf(\"day\").toDate();\r\n            $scope.indispo.end = moment($scope.indispo.end).startOf(\"day\").toDate();\r\n        }\r\n\r\n        $scope.pickerDateDebut = {\r\n            opened: false\r\n        }\r\n        $scope.pickerDateFin = {\r\n            opened: false\r\n        }\r\n\r\n        $scope.openPickerDebut = function () {\r\n            $scope.pickerDateDebut.opened = true;\r\n        };\r\n        $scope.openPickerFin = function () {\r\n            $scope.pickerDateFin.opened = true;\r\n        };\r\n\r\n        $scope.save = function () {\r\n            //TO Do revoir construction de la date\r\n            $scope.indispo.start = moment($scope.indispo.start).hour(8).format(\"YYYY-MM-DD HH:mm:ss\");;\r\n            $scope.indispo.end = moment($scope.indispo.end).hour(17).minutes(30).format(\"YYYY-MM-DD HH:mm:ss\");;\r\n            $scope.indispo.toSave = true;\r\n            $uibModalInstance.close($scope.indispo);\r\n        };\r\n\r\n        $scope.delete = function () {\r\n            $scope.indispo.toSave = false;\r\n            $uibModalInstance.close($scope.indispo);\r\n        };\r\n\r\n        $scope.dismiss = function () {\r\n            $uibModalInstance.dimiss(\"cancel\");\r\n        };\r\n    });\nwebApp.controller(\"planificationController\", function (initializers) {\r\n    initializers.planification();\r\n});\nwebApp.controller(\"PlanAnneeController\",\r\n\tfunction ($scope, $uibModal, $http, classesService, weekService, BACKEND_URL) {\r\n\t\t\r\n\t\t$scope.BACKEND_URL = BACKEND_URL;\r\n\t    $scope.current_classes = [];\r\n\t    $scope.next_classes = [];\r\n\t\t\r\n\t    classesService.getCurrentNextList('current').then(function (classes) {\r\n\t        $scope.current_classes = classes;\r\n\t        $scope.classesView = [].concat($scope.current_classes);\r\n\t    });\r\n\r\n\t    classesService.getCurrentNextList('next').then(function (classes) {\r\n\t        $scope.next_classes = classes;\r\n\t        $scope.next_classesView = [].concat($scope.next_classes);\r\n\t    });\r\n\r\n\t    $scope.year = \"\";\r\n\t    $scope.nextyear = \"\";\r\n\t    $scope.week = [];\r\n\t    weekService.getList('current').then(function (week) {\r\n\t        $scope.week = week;\r\n\t        $scope.weekView = [].concat($scope.week);\r\n\t    });\r\n\r\n\t    $scope.nextweek = [];\r\n\t    weekService.getList('next').then(function(week) {\r\n\t        $scope.nextweek = week;\r\n\t        $scope.nextweekView = [].concat($scope.nextweek);\r\n\t    });\r\n\r\n\t    $http({\r\n\t        method: 'GET',\r\n\t        url: BACKEND_URL + 'plan/years/current'\r\n\t    }).then(function successCallback(response) {\r\n\t        $scope.year = response.data.year;\r\n\t    }, function errorCallback(response) {\r\n\t    });\r\n\t    $http({\r\n\t        method: 'GET',\r\n\t        url: BACKEND_URL + 'plan/years/next'\r\n\t    }).then(function successCallback(response) {\r\n\t        $scope.nextyear = response.data.year;\r\n\t    }, function errorCallback(response) {\r\n\r\n\t    });\r\n\t});\nwebApp.factory(\"ensCalendarService\",\r\n    function(uiCalendarConfig, indispoService, BACKEND_URL) {\r\n\r\n        //Partie pour calendar indispos\r\n        var dayRender = function (date, cell) {\r\n            if (!cell.hasClass(\"fc-other-month\") && moment(date).isAfter(moment().startOf(\"day\"))) {\r\n                if (!cell.hasClass(\"clickable\")) {\r\n                    cell.addClass(\"clickable\");\r\n                }\r\n\r\n                cell.empty();\r\n                cell.css(\"position\", \"relative\");\r\n                \r\n                switch (indispoService.checkDayForIndispo(date)) {\r\n                case 1:\r\n                    cell.append('<p class=\"day-text\"><strong>Journée</strong></p>');\r\n                    cell.css(\"background-color\", \"#FF4136\");\r\n                    break;\r\n                case 2:\r\n                    cell.append('<p class=\"day-text\"><strong>Matin</strong></p>');\r\n                    cell.css(\"background-color\", \"#FFDC00\");\r\n                    break;\r\n                case 3:\r\n                    cell.append('<p class=\"day-text\"><strong>Après-midi</strong></p>');\r\n                    cell.css(\"background-color\", \"#FF851B\");\r\n                    break;\r\n                case 4:\r\n                    cell.append('<p class=\"day-text\"><strong>Période</strong></p>');\r\n                    cell.css(\"background-color\", \"#AAAAAA\");\r\n                    break;\r\n                case 0:\r\n                    cell.append('<p class=\"day-text\"><strong>Disponible</strong></p>');\r\n                    cell.css(\"background-color\", \"#2ECC40\");\r\n                    break;\r\n                }\r\n            }\r\n        };\r\n\r\n        var dayClick = function (date, jsEvent, view) {\r\n            var i = indispoService.checkDayForIndispo(date);\r\n            if (i !== 4) {\r\n                indispoService.changeIndispoType(date);\r\n                dayRender(date, $(this));\r\n                //uiCalendarConfig.calendars.indisposCalendar\r\n            } else {\r\n                //TO DO\r\n                indispoService.openPeriodeModal(date);\r\n            }\r\n        }\r\n\r\n        //Partie pour calendar cours\r\n\r\n        var eventsGoogle = {\r\n            googleCalendarId: \"fr.french#holiday@group.v.calendar.google.com\",\r\n            googleCalendarApiKey: \"AIzaSyAbOYkIfOWcqCnHEs_Mlf0JuT0HJ8TVq1M\",\r\n            className: \"gcal-event\",\r\n            currentTimezone: \"Europe/Paris\"\r\n        };\r\n\r\n        var events = {\r\n            url: BACKEND_URL + \"public/cours\",\r\n            color: \"green\",\r\n            className: \"coursEvent\",\r\n            eventDataTransform: function (rawEventData) {\r\n                return {\r\n                    id: rawEventData.id,\r\n                    title: rawEventData.matiere.nom,\r\n                    enseignant: rawEventData.user != undefined ? rawEventData.user.firstName + \" \" + rawEventData.user.lastName : \"\",\r\n                    classes: printClasses(rawEventData.classes),\r\n                    start: rawEventData.start,\r\n                    end: rawEventData.end,\r\n                    assignationSent: rawEventData.assignationSent\r\n                };\r\n            }\r\n        };\r\n\r\n        function printClasses(classes) {\r\n            var result = \"\";\r\n            classes.forEach(function (classe) {\r\n                result += classe.nom + \" \";\r\n            });\r\n            return result;\r\n        }\r\n\r\n        var eventSources = [eventsGoogle, events];\r\n\r\n        var eventRender = function (event, element, view) {\r\n            if (view.type == \"agendaWeek\")\r\n                if (element.hasClass(\"coursEvent\")) {\r\n                    element.find(\".fc-content\").append(\"<p>\" + event.enseignant + \"</p>\");\r\n                    element.find(\".fc-content\").append(\"<p>\" + event.classes + \"</p>\");\r\n                }\r\n        };\r\n\r\n        /* Configs : */\r\n\r\n        var calendarConfig = {\r\n            calendarIndispos: {\r\n                height: 540,\r\n                editable: false,\r\n                header: {\r\n                    left: \"title\",\r\n                    right: \"today prev,next\"\r\n                },\r\n                weekends: false,\r\n                weekNumbers: true,\r\n                dayRender: dayRender,\r\n                dayClick: dayClick,\r\n                minTime: \"08:00:00\",\r\n                maxTime: \"17:30:00\",\r\n                dayNames: [\"Dimanche\", \"Lundi\", \"Mardi\", \"Mercredi\", \"Jeudi\", \"Vendredi\", \"Samedi\"],\r\n                dayNamesShort: [\"Dim\", \"Lun\", \"Mar\", \"Mer\", \"Jeu\", \"Ven\", \"Sam\"],\r\n                monthNames: [\"Janvier\", \"Février\", \"Mars\", \"Avril\", \"Mai\", \"Juin\", \"Juillet\", \"Août\", \"Septembre\", \"Octobre\", \"Novembre\", \"Décembre\"]\r\n            },\r\n            calendarCours: {\r\n                height: 540,\r\n                editable: false,\r\n                header: {\r\n                    left: \"title\",\r\n                    center: \"month,agendaWeek\",\r\n                    right: \"today prev,next\"\r\n                },\r\n                weekends: false,\r\n                weekNumbers: true,\r\n                eventRender: eventRender,\r\n                minTime: \"08:00:00\",\r\n                maxTime: \"17:30:00\",\r\n                dayNames: [\"Dimanche\", \"Lundi\", \"Mardi\", \"Mercredi\", \"Jeudi\", \"Vendredi\", \"Samedi\"],\r\n                dayNamesShort: [\"Dim\", \"Lun\", \"Mar\", \"Mer\", \"Jeu\", \"Ven\", \"Sam\"],\r\n                monthNames: [\"Janvier\", \"Février\", \"Mars\", \"Avril\", \"Mai\", \"Juin\", \"Juillet\", \"Août\", \"Septembre\", \"Octobre\", \"Novembre\", \"Décembre\"]\r\n            }\r\n        };\r\n\r\n        return {\r\n            calendarConfig: calendarConfig,\r\n            eventSources: eventSources\r\n        }\r\n    })\nwebApp.factory(\"ensCours\",\r\n\tfunction(Restangular){\r\n\t\treturn {\r\n\t\t\tgetCours: function(){\r\n\t\t\t\treturn Restangular.all(\"ens/cours\").getList();\r\n\t\t\t}         \r\n\t\t}\r\n\t})\nwebApp.factory(\"indispoService\",\r\n    function ($q, $uibModal, helper, Restangular, uiCalendarConfig, notifService) {\r\n\r\n        var indispos = [];\r\n\r\n        var listModified = false;\r\n\r\n        function getServerIndispos() {\r\n            return $q(function(resolve, reject) {\r\n                Restangular.all(\"ens/indispo\").getList().then(\r\n                    function(data) {\r\n                        indispos = [].concat(data.plain());\r\n                        listModified = false;\r\n                        //peut-être à mettre dans le service calendar (force la mise à jour de l'ui) :\r\n                        uiCalendarConfig.calendars.indisposCalendar.fullCalendar('prev');\r\n                        uiCalendarConfig.calendars.indisposCalendar.fullCalendar('next');\r\n                        resolve(true);\r\n                    }, function() {\r\n                        reject(false);\r\n                    });\r\n            });\r\n        };\r\n\r\n        function checkDayForIndispo(date) {\r\n            var result = 0;\r\n            var indispo = helper.getObjectFromDateInArray(indispos, \"start\", date);\r\n            if (indispo) {\r\n                if (indispo.toDelete) {\r\n                    result = 0;\r\n                }\r\n                else if (moment(indispo.start).hour() === 8 && moment(indispo.end).hour() === 17 && (moment(indispo.start).isSame(indispo.end, \"day\"))) {\r\n                    result = 1;\r\n                } else if (moment(indispo.start).hour() === 8 && moment(indispo.end).hour() === 12) {\r\n                    result = 2;\r\n                } else if (moment(indispo.start).hour() === 13 && moment(indispo.end).hour() === 17) {\r\n                    result = 3;\r\n                } else {\r\n                    result = 4;\r\n                }\r\n            } else {\r\n                if (helper.getPeriodFromDateInArray(indispos, date)) {\r\n                    result = 4;\r\n                }\r\n            }\r\n\r\n            return result;\r\n        };\r\n\r\n        function changeIndispoType(date) {\r\n            var indispo = helper.getObjectFromDateInArray(indispos, \"start\", date);\r\n            if (indispo) {\r\n                indispo.isModified = true;\r\n\r\n                //Si Disponible -> Journée\r\n                if (indispo.toDelete) {\r\n                    indispo.start = moment(indispo.start).hour(8).format(\"YYYY-MM-DD HH:mm:ss\");\r\n                    indispo.toDelete = false;\r\n                }\r\n                //Si Journée -> Matin\r\n                else if (moment(indispo.start).hour() === 8 && moment(indispo.end).hour() === 17) {\r\n                    indispo.end = moment(indispo.end).hour(12).minutes(15).format(\"YYYY-MM-DD HH:mm:ss\");\r\n                }\r\n                //Si Matin -> Après-midi\r\n                else if (moment(indispo.start).hour() === 8 && moment(indispo.end).hour() === 12) {\r\n                    indispo.start = moment(indispo.start).hour(13).minutes(15).format(\"YYYY-MM-DD HH:mm:ss\");\r\n                    indispo.end = moment(indispo.end).hour(17).minutes(30).format(\"YYYY-MM-DD HH:mm:ss\");\r\n                }\r\n                //Si Après-midi -> Disponible\r\n                else if (moment(indispo.start).hour() === 13 && moment(indispo.end).hour() === 17) {\r\n                    indispo.toDelete = true;\r\n                    indispo.isModified = false;\r\n                }\r\n                //Si Disponible -> Journée\r\n            } else {\r\n                var newIndispo = {};\r\n                newIndispo.start = date.hour(8).format(\"YYYY-MM-DD HH:mm:ss\");\r\n                newIndispo.end = date.hour(17).minutes(30).format(\"YYYY-MM-DD HH:mm:ss\");\r\n                newIndispo.isModified = true;\r\n                indispos.push(newIndispo);\r\n            }\r\n            listModified = true;\r\n        };\r\n\r\n        function updateIndispos() {\r\n\r\n            var promises = [];\r\n\r\n            indispos.forEach(function (ind) {\r\n                if (ind.isModified) {\r\n                    promises.push(Restangular.all(\"ens/indispo\").post(ind));\r\n                }\r\n                if (ind.toDelete) {\r\n                    promises.push(Restangular.one(\"ens/indispo\", ind.id).remove());\r\n                }\r\n            });\r\n\r\n            notifService.saving();\r\n            //Attendre que toutes les promesses soit remplies avant de mettre à jour l'ui!\r\n            $q.all(promises).then(function() {\r\n                getServerIndispos();\r\n                listModified = false;\r\n                notifService.saved();\r\n                return true;\r\n            },function() {\r\n                getServerIndispos();\r\n                listModified = false;\r\n                notifService.error(\"Un problème avec le serveur a empeché la sauvegarde\");\r\n                return false;\r\n            });\r\n        };\r\n\r\n        function openPeriodeModal(date) {\r\n            var indispo = date ? helper.getPeriodFromDateInArray(indispos, date) : { isNew:true };\r\n            var modalInstance = $uibModal.open({\r\n                animation: true,\r\n                templateUrl: \"modals/indispos/periodeModal.html\",\r\n                controller: \"periodeModal\",\r\n                size: \"md\",\r\n                resolve: {\r\n                    indispo: function () {\r\n                        return Object.create(indispo);\r\n                    }\r\n                }\r\n            });\r\n\r\n            modalInstance.result.then(function (newIndispo) {\r\n                if (newIndispo.toSave) {\r\n                    Restangular.all(\"ens/indispo\").post(newIndispo).then(function() {\r\n                        getServerIndispos();\r\n                    });\r\n                } else {\r\n                    Restangular.one(\"ens/indispo\", newIndispo.id).remove().then(function () {\r\n                        getServerIndispos();\r\n                    });\r\n                }\r\n            }, function () {\r\n                //Logique à mettre?\r\n            });\r\n        };\r\n        return {\r\n\r\n            getIndispos: function() {\r\n                return indispos;\r\n            },\r\n\r\n            listModified: function () {\r\n                return listModified;\r\n            },\r\n\r\n            getServerIndispos: getServerIndispos,\r\n\r\n            checkDayForIndispo: checkDayForIndispo,\r\n\r\n            changeIndispoType: changeIndispoType,\r\n\r\n            updateIndispos: updateIndispos,\r\n\r\n            openPeriodeModal: openPeriodeModal\r\n        }\r\n    })\nwebApp.factory(\"adminService\",\r\n    function($q, notifService, Restangular) {\r\n\r\n        var list = [];\r\n\r\n        function updateList() {\r\n            return $q(function(resolve, reject) {\r\n                //TO DO Lancer toastr chargement\r\n                Restangular.all(\"admin/personnes\").getList().then(function(data) {\r\n                    list = [].concat(data);\r\n                    //TO DO SUCCESS TOASTR\r\n                    resolve();\r\n                }, function() {\r\n                    //TO DO ERROR TOASTR\r\n                    reject();\r\n                });\r\n            });\r\n        };\r\n\r\n        function getList() {\r\n            return $q(function(resolve, reject) {\r\n                if (list) {\r\n                    resolve(list);\r\n                } else {\r\n                    console.log(list);\r\n                    updateList().then(function() {\r\n                        resolve(list);\r\n                    });\r\n                }\r\n            });\r\n        };\r\n\r\n        function getOne(id) {\r\n            return $q(function(resolve, reject) {\r\n                //TO DO Lancer toastr chargement\r\n                Restangular.one(\"admin/personnes\", id).get().then(function(data) {\r\n                    //TO DO SUCCESS TOASTR\r\n                    resolve(data);\r\n                }, function() {\r\n                    //TO DO ERROR TOASTR\r\n                    reject();\r\n                });\r\n            });\r\n        };\r\n\r\n        function getNew() {\r\n            return Restangular.one(\"admin/personnes\");\r\n        };\r\n\r\n        function save(personne) {\r\n            return $q(function(resolve, reject) {\r\n                notifService.saving();\r\n                personne.save().then(function() {\r\n                    notifService.saved();\r\n                    resolve();\r\n                }, function(response) {\r\n                    notifService.error(response.data.message);\r\n                    reject();\r\n                });\r\n            });\r\n        };\r\n\r\n        function remove(personne) {\r\n            return $q(function(resolve, reject) {\r\n                notifService.deleting();\r\n                personne.remove().then(function() {\r\n                    notifService.deleted();\r\n                    resolve();\r\n                }, function(response) {\r\n                    notifService.error(response.data.message);\r\n                    reject();\r\n                });\r\n            });\r\n        }\r\n\r\n        return {\r\n\r\n            updateList: updateList,\r\n\r\n            getList: getList,\r\n\r\n            getOne: getOne,\r\n\r\n            getNew: getNew,\r\n\r\n            save: save,\r\n\r\n            remove: remove\r\n        }\r\n    })\nwebApp.factory(\"Authentification\",function($rootScope, $window, Session, AUTH_EVENTS, Restangular) {\r\n\tvar authService = {};\t\t\r\n\t\r\n\t//la fonction login\r\n\tauthService.login = function(user, success, error) {\r\n\t\r\n\tRestangular.all(\"login\").post(user)\r\n\t.then(function(data) {\r\n\t\tif(data){\r\n\t\t\tvar user = data;\r\n\t\t\t//Stockage des données utilisateurs dans le navigateur\r\n\t\t\t$window.sessionStorage[\"userData\"] = JSON.stringify(user);\r\n\t\t\tSession.create(user);\r\n\t\t\t\r\n\t\t\t//Déclencher l'evenement loginSuccess\r\n\t\t\t$rootScope.$broadcast(AUTH_EVENTS.loginSuccess);\r\n\t\t\t//lancer la fonction succès ( 2eme paramètre)\r\n\t\t\tsuccess(user);\r\n\t\t}\r\n\t}, function() {\r\n\t            $rootScope.$broadcast(AUTH_EVENTS.loginFailed);\r\n\t            error();\r\n\t        }\r\n\t    )};\r\n\r\n\t//verification si user est connecté\r\n\tauthService.isAuthenticated = function() {\r\n\t\treturn !!Session.user; // le double point d'exclamation force un booléan \r\n\t};\r\n\t\r\n\t//verification si user est autorisé\r\n\tauthService.isAuthorized = function(authorizedRoles) {\r\n\t\tif (!angular.isArray(authorizedRoles)) {\r\n\t      authorizedRoles = [authorizedRoles];\r\n\t    }\r\n\t\tvar bool = false;\r\n\t\tif (authService.isAuthenticated()){\r\n\t\t\tangular.forEach(Session.roles, function(role) {\r\n\t\t\t\tif (authorizedRoles.indexOf(role) !== -1)\r\n\t\t\t\t\tbool = true;\r\n\t\t\t\t});\r\n\t\t}\r\n\t    return bool;\r\n\t};\r\n\t\r\n\t//logout de l'utilisateur, destruction de la session ( javascript + naviguateur)\r\n\tauthService.logout = function () {\r\n\t    Restangular.one(\"logout\").doPOST();\r\n\t\tSession.destroy();\r\n\t\t$window.sessionStorage.removeItem(\"userData\");\r\n\t\t$window.location.reload();\r\n\t\t//$rootScope.$broadcast(AUTH_EVENTS.logoutSuccess);\r\n\t}\r\n\r\n\treturn authService;\r\n});\r\n\r\n\nwebApp.factory(\"AuthInterceptor\",function($rootScope, $q, Session, AUTH_EVENTS) {\r\n\treturn {\r\n\t\tresponseError : function(response) {\r\n\t\t\t$rootScope.$broadcast({\r\n\t\t\t\t401 : AUTH_EVENTS.notAuthenticated,\r\n\t\t\t\t403 : AUTH_EVENTS.notAuthorized,\r\n\t\t\t\t419 : AUTH_EVENTS.sessionTimeout,\r\n\t\t\t\t440 : AUTH_EVENTS.sessionTimeout\r\n\t\t\t}[response.status], response);\r\n\t\t\treturn $q.reject(response);\r\n\t\t}\r\n\t};\r\n});\nwebApp.factory(\"planCalendarService\",\r\n    function(uiCalendarConfig, $uibModal, coursService, enseignantsService, BACKEND_URL) {\r\n\r\n        var eventRender = function(event, element, view) {\r\n\r\n            if (view.type === \"agendaWeek\") {\r\n                if (element.hasClass(\"coursContainer\") && moment(event.start).isAfter(moment().startOf(\"day\"))) {\r\n                    element.find(\".fc-bg\").append(\"<div>\" + event.description + \"</div>\");\r\n                    element.addClass(\"clickable\");\r\n                }\r\n                if (element.hasClass(\"coursEvent\")) {\r\n                    element.find(\".fc-content\").append(\"<p>\" + event.enseignant + \"</p>\");\r\n                    element.find(\".fc-content\").append(\"<p>\" + event.classes + \"</p>\");\r\n                }\r\n            } else {\r\n                if (element.hasClass(\"coursContainer\")) {\r\n                    element.css(\"display\", \"none\");\r\n                }                  \r\n            }\r\n            if(event.assignationSent == 0) {\r\n                element.css(\"backgroundColor\", \"#FF851B\");\r\n            }\r\n        };\r\n\r\n        var eventClick = function(event, jsEvent, view) {\r\n            if (view.type === \"agendaWeek\" && moment(event.start).isAfter(moment().startOf(\"day\"))) {\r\n                //openEventDetails(event);\r\n                var modalDetails = $uibModal.open({\r\n                    animation: true,\r\n                    templateUrl: \"modals/coursDetails.html\",\r\n                    controller: \"CoursDetails\",\r\n                    size: \"md\",\r\n                    resolve: {\r\n                        event: function() {\r\n                            return event;\r\n                        }\r\n                    }\r\n                });\r\n\r\n                modalDetails.result.then(function (coursP) {\r\n                    if (coursP.toDelete) {\r\n                        coursService.remove(coursP).then(function () {\r\n                            enseignantsService.updateList();\r\n                            uiCalendarConfig.calendars.planCalendar.fullCalendar(\"removeEventSource\", events);\r\n                            uiCalendarConfig.calendars.planCalendar.fullCalendar(\"addEventSource\", events);\r\n                        });\r\n                    } else {\r\n                        coursService.save(coursP).then(function () {\r\n                            enseignantsService.updateList();\r\n                            uiCalendarConfig.calendars.planCalendar.fullCalendar(\"removeEventSource\", events);\r\n                            uiCalendarConfig.calendars.planCalendar.fullCalendar(\"addEventSource\", events);\r\n                        });\r\n                    }\r\n                    \r\n                });\r\n            }\r\n        };\r\n\r\n        var sendAssignations = function(){\r\n            var view = uiCalendarConfig.calendars.planCalendar.fullCalendar(\"getView\");\r\n            coursService.sendAssignations(view.intervalStart.format(), view.intervalEnd.format()).then(function() {\r\n                uiCalendarConfig.calendars.planCalendar.fullCalendar(\"removeEventSource\", events);\r\n                uiCalendarConfig.calendars.planCalendar.fullCalendar(\"addEventSource\", events);\r\n            });          \r\n        };\r\n\r\n        /* Configuration du calendrier */\r\n        var config = {\r\n            calendar: {\r\n                height: 540,\r\n                editable: false,\r\n                customButtons: {\r\n                    sendMail: {\r\n                        text: \"Envoyer mails d'assignations\",\r\n                        click: sendAssignations\r\n                    }\r\n                },\r\n                header: {\r\n                    left: \"title, sendMail\",\r\n                    center: \"month,agendaWeek\",\r\n                    right: \"today prev,next\"\r\n                },\r\n                weekends: false,\r\n                weekNumbers: true,\r\n                eventRender: eventRender,\r\n                eventClick: eventClick,\r\n                minTime: \"08:00:00\",\r\n                maxTime: \"17:30:00\",\r\n                defaultView: \"agendaWeek\",\r\n                dayNames: [\"Dimanche\", \"Lundi\", \"Mardi\", \"Mercredi\", \"Jeudi\", \"Vendredi\", \"Samedi\"],\r\n                dayNamesShort: [\"Dim\", \"Lun\", \"Mar\", \"Mer\", \"Jeu\", \"Ven\", \"Sam\"],\r\n                monthNames: [\"Janvier\", \"Février\", \"Mars\", \"Avril\", \"Mai\", \"Juin\", \"Juillet\", \"Août\", \"Septembre\", \"Octobre\", \"Novembre\", \"Décembre\"]\r\n            }\r\n        };\r\n\r\n        //Données du calendrier\r\n\r\n        var events = {\r\n            url: BACKEND_URL + \"plan/cours\",\r\n            color: \"green\",\r\n            className: \"coursEvent\",\r\n            eventDataTransform: function(rawEventData) {\r\n                return {\r\n                    id: rawEventData.id,\r\n                    title: rawEventData.matiere.nom,\r\n                    enseignant: rawEventData.user != undefined ? rawEventData.user.firstName + \" \" + rawEventData.user.lastName : \"\",\r\n                    classes: printClasses(rawEventData.classes),\r\n                    start: rawEventData.start,\r\n                    end: rawEventData.end,\r\n                    assignationSent: rawEventData.assignationSent\r\n            };\r\n            }\r\n        };\r\n        \r\n        function printClasses(classes) {\r\n            var result = \"\";\r\n            classes.forEach(function(classe) {\r\n                result += classe.nom + \" \";\r\n            });\r\n            return result;\r\n        }\r\n        //Fond clickable pour rajouter les cours\r\n        var backgroundEvent = [\r\n            {\r\n                start: \"8:00\",\r\n                end: \"12:15\",\r\n                dow: [1, 2, 3, 4, 5],\r\n                className: \"coursContainer\",\r\n                description: \"Rajouter un cours\"\r\n            },\r\n            {\r\n                start: \"13:15\",\r\n                end: \"17:30\",\r\n                dow: [1, 2, 3, 4, 5],\r\n                className: \"coursContainer\",\r\n                description: \"Rajouter un cours\"\r\n            }\r\n        ];\r\n\r\n        var eventsGoogle = {\r\n            googleCalendarId: \"fr.french#holiday@group.v.calendar.google.com\",\r\n            googleCalendarApiKey: \"AIzaSyAbOYkIfOWcqCnHEs_Mlf0JuT0HJ8TVq1M\",\r\n            className: \"gcal-event\",\r\n            currentTimezone: \"Europe/Paris\"\r\n        };\r\n\r\n        /* Arrays de avec données de base du calendrier (au chargement de la page) */\r\n        var feed = [events, eventsGoogle, backgroundEvent];\r\n\r\n        return {\r\n            config: config,\r\n            feed: feed\r\n        }\r\n    })\nwebApp.factory(\"classesService\",\r\n\tfunction ($q, notifService, Restangular) {\r\n\t    var list = [];\r\n\r\n\t    function updateList() {\r\n\t        return $q(function (resolve, reject) {\r\n\t            //TO DO Lancer toastr chargement\r\n\t            Restangular.all(\"plan/classe\").getList().then(function (data) {\r\n\t                angular.forEach(data, function (element) {\r\n\t                    element.annee = element.start.substr(0, 4) + \"/\" + element.end.substr(0, 4);\r\n\t                });\r\n\t                list = [].concat(data.plain());\r\n\t                //TO DO SUCCESS TOASTR\r\n\t                resolve();\r\n\t            }, function () {\r\n\t                //TO DO ERROR TOASTR\r\n\t                reject();\r\n\t            });\r\n\t        });\r\n\t    };\r\n\r\n\t    function updateCurrentNextList(year) {\r\n\t        return $q(function (resolve, reject) {\r\n\t            //TO DO Lancer toastr chargement\r\n\t            Restangular.one(\"plan/current_next_classe\", year).getList().then(function (data) {\r\n\t                angular.forEach(data, function (element) {\r\n\t                    element.annee = element.start.substr(0, 4) + \"/\" + element.end.substr(0, 4);\r\n\t                });\r\n\t                list = [].concat(data.plain());\r\n\t                //TO DO SUCCESS TOASTR\r\n\t                resolve();\r\n\t            }, function () {\r\n\t                //TO DO ERROR TOASTR\r\n\t                reject();\r\n\t            });\r\n\t        });\r\n\t    };\r\n\r\n\t    function getList() {\r\n\t        return $q(function (resolve, reject) {\r\n\t            updateList().then(function () {\r\n\t                resolve(list);\r\n\t            });\r\n\t        });\r\n\t    };\r\n\r\n\t    function getCurrentNextList(year) {\r\n\t        return $q(function (resolve, reject) {\r\n\t            updateCurrentNextList(year).then(function () {\r\n\t                resolve(list);\r\n\t            });\r\n\t        });\r\n\t    };\r\n\r\n\t    function getOne(id) {\r\n\t        return $q(function (resolve, reject) {\r\n\t            //TO DO Lancer toastr chargement\r\n\t            Restangular.one(\"plan/classe\", id).get().then(function (data) {\r\n\t                data.annee = data.start.substr(0, 4) + \"/\" + data.end.substr(0, 4);\r\n\t                data.start = moment(data.start).startOf(\"day\").toDate();\r\n\t                data.end = moment(data.end).startOf(\"day\").toDate();\r\n\t                data.id_Users = Number(data.id_Users);\r\n\t                //TO DO SUCCESS TOASTR\r\n\t                resolve(data);\r\n\t            }, function () {\r\n\t                //TO DO ERROR TOASTR\r\n\t                reject();\r\n\t            });\r\n\t        });\r\n\t    };\r\n\r\n\t    function getNew() {\r\n\t        return Restangular.one(\"plan/classe\");\r\n\t    };\r\n\r\n\t    function save(classe) {\r\n\t        return $q(function (resolve, reject) {\r\n\t            notifService.saving();\r\n\t            classe.save().then(function () {\r\n\t                notifService.saved();\r\n\t                resolve();\r\n\t            }, function (message) {\r\n\t                notifService.error(message);\r\n\t                reject();\r\n\t            });\r\n\t        });\r\n\t    };\r\n\r\n\t    function remove(classe) {\r\n\t        return $q(function (resolve, reject) {\r\n\t            notifService.deleting();\r\n\t            classe.remove().then(function () {\r\n\t                notifService.deleted();\r\n\t                resolve();\r\n\t            }, function (response) {\r\n\t                notifService.error(response.data.message);\r\n\t                reject();\r\n\t            });\r\n\t        });\r\n\t    }\r\n\r\n\t    return {\r\n\t        updateList: updateList,\r\n\r\n\t        getList: getList,\r\n\r\n\t        updateCurrentNextList: updateCurrentNextList,\r\n\r\n\t        getCurrentNextList: getCurrentNextList,\r\n\r\n\t        getOne: getOne,\r\n\r\n\t        getNew: getNew,\r\n\r\n\t        save: save,\r\n\r\n\t        remove: remove\r\n\t    }\r\n\t})\nwebApp.factory(\"coursService\",\r\n\tfunction($q, Restangular, notifService){\r\n\r\n\t    function getOne(id) {\r\n\t        return $q(function(resolve, reject) {\r\n\t            //TO DO Lancer toastr chargement\r\n\t            Restangular.one(\"plan/cours\", id).get().then(function (data) {\r\n\t                data.id_Users = Number(data.id_Users);\r\n\t                data.id_Matieres = Number(data.id_Matieres);\r\n\t                //TO DO SUCCESS TOASTR\r\n\t                resolve(data);\r\n\t            }, function() {\r\n\t                //TO DO ERROR TOASTR\r\n\t                reject();\r\n\t            });\r\n\t        });\r\n\t    };\r\n\r\n\t    function getNew() {\r\n\t        return Restangular.one(\"plan/cours\");\r\n\t    };\r\n\r\n\t    function save(cours) {\r\n\t        return $q(function(resolve, reject) {\r\n\t            notifService.saving();\r\n\t            cours.save().then(function() {\r\n\t                notifService.saved();\r\n\t                resolve();\r\n\t            }, function(response) {\r\n\t                notifService.error(response.data.message);\r\n\t                reject();\r\n\t            });\r\n\t        });\r\n\t    };\r\n\r\n\t    function remove(cours) {\r\n\t        return $q(function(resolve, reject) {\r\n\t            notifService.deleting();\r\n\t            cours.remove().then(function() {\r\n\t                notifService.deleted();\r\n\t                resolve();\r\n\t            }, function(response) {\r\n\t                notifService.error(response.data.message);\r\n\t                reject();\r\n\t            });\r\n\t        });\r\n\t    };\r\n        \r\n        function sendAssignations(start,end) {\r\n            return $q(function(resolve, reject) {\r\n                notifService.sending();\r\n                Restangular.one(\"plan/cours\").customGET(\"assignation\", { start: start, end: end }).then(function() {\r\n                    notifService.sent();\r\n                    resolve();\r\n                }, function(response) {\r\n                    notifService.error(response.data.message);\r\n                    reject();\r\n                });\r\n            });\r\n        };\r\n\r\n\t    return {\r\n\r\n\t        getOne: getOne,\r\n\r\n\t        getNew: getNew,\r\n\r\n\t        save: save,\r\n\r\n\t        remove: remove,\r\n            \r\n            sendAssignations: sendAssignations\r\n\t    }\r\n\t})\nwebApp.factory(\"enseignantsService\",\r\n    function($q, notifService, Restangular) {\r\n        \r\n        var list = [];\r\n\r\n        function updateList() {\r\n            return $q(function(resolve, reject) {\r\n                //TO DO Lancer toastr chargement\r\n                Restangular.all(\"plan/enseignant\").getList().then(function (data) {\r\n                    angular.forEach(data, function (element) {\r\n                        element.fullName = element.firstName + \" \" + element.lastName;\r\n                    });\r\n                    list = [].concat(data);\r\n                    //TO DO SUCCESS TOASTR\r\n                    resolve();\r\n                }, function() {\r\n                    //TO DO ERROR TOASTR\r\n                    reject();\r\n                });\r\n            });\r\n        };\r\n\r\n        function getList() {\r\n            return $q(function(resolve, reject) {\r\n                if (list) {\r\n                    resolve(list);\r\n                } else {\r\n                    updateList().then(function() {\r\n                        resolve(list);\r\n                    });\r\n                }\r\n            });\r\n        };\r\n\r\n        function getOne(id) {\r\n            return $q(function(resolve, reject) {\r\n                //TO DO Lancer toastr chargement\r\n                Restangular.one(\"plan/enseignant\", id).get().then(function(data) {\r\n                    //TO DO SUCCESS TOASTR\r\n                    resolve(data);\r\n                }, function() {\r\n                    //TO DO ERROR TOASTR\r\n                    reject();\r\n                });\r\n            });\r\n        };\r\n\r\n        function save(enseignant) {\r\n            return $q(function (resolve, reject) {\r\n                notifService.saving();\r\n                enseignant.save().then(function () {\r\n                    notifService.saved();\r\n                    resolve();\r\n                }, function (response) {\r\n                    notifService.error(response.data.message);\r\n                    reject();\r\n                });\r\n            });\r\n        };\r\n\r\n        return {\r\n            updateList: updateList,\r\n            getList: getList,\r\n            getOne: getOne,\r\n            save :save\r\n        }\r\n    })\nwebApp.factory(\"matieresService\",\r\n    function($q, notifService, Restangular) {\r\n\r\n        var list = [];\r\n\r\n        function updateList() {\r\n            return $q(function(resolve, reject) {\r\n                //TO DO Lancer toastr chargement\r\n                Restangular.all(\"plan/matiere\").getList().then(function(data) {\r\n                    list = [].concat(data);\r\n                    //TO DO SUCCESS TOASTR\r\n                    resolve();\r\n                }, function() {\r\n                    //TO DO ERROR TOASTR\r\n                    reject();\r\n                });\r\n            });\r\n        };\r\n\r\n        function getList() {\r\n            return $q(function(resolve, reject) {\r\n                if (list) {\r\n                    resolve(list);\r\n                } else {\r\n                    updateList().then(function() {\r\n                        resolve(list);\r\n                    });\r\n                }\r\n            });\r\n        };\r\n\r\n        function getOne(id) {\r\n            return $q(function(resolve, reject) {\r\n                //TO DO Lancer toastr chargement\r\n                Restangular.one(\"plan/matiere\", id).get().then(function(data) {\r\n                    //TO DO SUCCESS TOASTR\r\n                    resolve(data);\r\n                }, function() {\r\n                    //TO DO ERROR TOASTR\r\n                    reject();\r\n                });\r\n            });\r\n        };\r\n\r\n        function getNew() {\r\n            return Restangular.one(\"plan/matiere\");\r\n        };\r\n\r\n        function save(matiere) {\r\n            return $q(function(resolve, reject) {\r\n                notifService.saving();\r\n                matiere.save().then(function() {\r\n                    notifService.saved();\r\n                    resolve();\r\n                }, function(response) {\r\n                    notifService.error(response.data.message);\r\n                    reject();\r\n                });\r\n            });\r\n        };\r\n\r\n        function remove(matiere) {\r\n            return $q(function(resolve, reject) {\r\n                notifService.deleting();\r\n                matiere.remove().then(function() {\r\n                    notifService.deleted();\r\n                    resolve();\r\n                }, function(response) {\r\n                    notifService.error(response.data.message);\r\n                    reject();\r\n                });\r\n            });\r\n        }\r\n\r\n        return {\r\n            updateList: updateList,\r\n\r\n            getList: getList,\r\n\r\n            getOne: getOne,\r\n\r\n            getNew: getNew,\r\n\r\n            save: save,\r\n\r\n            remove: remove\r\n        }\r\n    })\nwebApp.factory(\"weekService\",\r\n\tfunction ($q, notifService, Restangular) {\r\n\t    var list = [];\r\n\r\n\t    function updateList(year) {\r\n\t        return $q(function (resolve, reject) {\r\n\t            //TO DO Lancer toastr chargement\r\n\t            Restangular.one(\"plan/weeks\", year).getList().then(function (data) {\r\n\t                list = [].concat(data.plain());\r\n\t                //TO DO SUCCESS TOASTR\r\n\t                resolve();\r\n\t            }, function () {\r\n\t                //TO DO ERROR TOASTR\r\n\t                reject();\r\n\t            });\r\n\t        });\r\n\t    };\r\n\r\n\t    function getList(year) {\r\n\t        return $q(function (resolve, reject) {\r\n\t            updateList(year).then(function () {\r\n\t                resolve(list);\r\n\t            });\r\n\t        });\r\n\t    };\r\n\r\n\r\n\t    return {\r\n\t        updateList: updateList,\r\n\r\n\t        getList: getList,\r\n\t    }\r\n\t})\nwebApp.controller(\"PlanCalendar\",\r\n\tfunction ($scope, planCalendarService) {\r\n\t    $scope.config = planCalendarService.config;\r\n\t    $scope.feed = planCalendarService.feed;\r\n\t});\nwebApp.controller(\"CoursDetails\",\r\n\tfunction($scope, $uibModalInstance, helper, coursService, enseignantsService, matieresService, classesService, event){\r\n\r\n        $scope.matieres = [];\r\n        $scope.enseignantsBase = [];\r\n        $scope.enseignants = [];\r\n        $scope.classes = [];\r\n        $scope.formClasses = {};\r\n\r\n        \r\n\r\n        matieresService.getList().then(function (data) {\r\n            $scope.matieres = data;\r\n        });\r\n\r\n\t    classesService.getList().then(function (data) {\r\n\t        $scope.classes = data;\r\n\t    });\t    \r\n\r\n        $scope.creation = event.title ? false : true;\r\n        \r\n        if (!$scope.creation){\r\n            coursService.getOne(event.id).then(function(cours) {\r\n                    $scope.cours = cours;\r\n                    $scope.cours.title = cours.matiere ? cours.matiere.nom : \"\";                    \r\n                    $scope.cours.title += cours.user ? \" | \" + cours.user.lastName : \"\";\r\n                    angular.forEach(cours.classes, function (classe) {\r\n\t\t\t\t\t   $scope.formClasses[classe.id] = true;\r\n                    }, this);\r\n                    enseignantsService.getList().then(function (data) {\r\n                        rajouterDisponibilité(data);\r\n                        $scope.enseignantsBase = [].concat(data);\r\n                        $scope.enseignants = [].concat($scope.enseignantsBase);\r\n                        listeners();\r\n                    });\r\n                    \r\n                });\r\n        }\r\n        else {\r\n            $scope.cours = coursService.getNew();\r\n            $scope.cours.start = event.start.format();\r\n            $scope.cours.end = event.end.format();\r\n            enseignantsService.getList().then(function (data) {\r\n                rajouterDisponibilité(data);\r\n                $scope.enseignantsBase = [].concat(data);\r\n                $scope.enseignants = [].concat($scope.enseignantsBase);\r\n                listeners();\r\n            });\r\n        }\r\n        \r\n        \r\n                \r\n        function listeners(){\r\n            $scope.$watch(function(){\r\n                return $scope.cours.id_Matieres;\r\n            }, function (oldValue, newValue) {\r\n                if (oldValue !== newValue) {\r\n                    $scope.enseignants = [];\r\n                    angular.forEach($scope.enseignantsBase, function (enseignant) {\r\n                        if (filtreEnseignants(enseignant))\r\n                            $scope.enseignants.push(enseignant);\r\n                    });\r\n                }    \r\n            }, true);\r\n            \r\n            $scope.$watch(function () {\r\n\t\t\t return $scope.formClasses;\r\n            }, function (value) {\r\n                $scope.cours.classes = [];\r\n                angular.forEach($scope.formClasses, function (v, k) {\r\n                    v && $scope.cours.classes.push(helper.getObjectFromArray($scope.classes,\"id\",k));\r\n                });\r\n            }, true);       \r\n        };       \r\n        \r\n        function filtreEnseignants(enseignant)\r\n        {\r\n            if (!$scope.cours.id_Matieres)\r\n                return true;\r\n            \r\n            if (helper.getObjectFromArray(enseignant.matieres, \"id\", $scope.cours.id_Matieres)) {\r\n                return true;\r\n            } else {\r\n                return false;\r\n            }\r\n        }\r\n        \r\n        function rajouterDisponibilité(enseignants) {\r\n            angular.forEach(enseignants, function (enseignant) {\r\n                if (enseignant.id == $scope.cours.id_Users) {\r\n                    enseignant.indisponible = false;\r\n                    enseignant.viewName = enseignant.fullName + \" (choix actuel)\";\r\n                }\r\n                else if (helper.getPeriodFromDateInArray(enseignant.indisponibilite, event.start)) {\r\n                    enseignant.indisponible = true;\r\n                    enseignant.viewName = enseignant.fullName + \" (indisponible)\";\r\n                } else {\r\n                    if (helper.getPeriodFromDateInArray(enseignant.cours, event.start)) {\r\n                        enseignant.indisponible = true;\r\n                        enseignant.viewName = enseignant.fullName + \" (déjà assigné)\";\r\n                    } else {\r\n                        enseignant.indisponible = false;\r\n                        enseignant.viewName = enseignant.fullName;\r\n                    }\r\n                }\r\n            });\r\n        };\r\n\r\n        $scope.save = function () {\r\n            $scope.cours.toDelete = false;\r\n            $uibModalInstance.close($scope.cours);\r\n\t\t};\r\n\t\t\r\n        $scope.delete = function () {\r\n            $scope.cours.toDelete = true;\r\n            $uibModalInstance.close($scope.cours);\r\n        };\r\n\t\t$scope.cancel = function(){\r\n\t\t\t$uibModalInstance.dismiss();\r\n\t\t};\r\n        \r\n        \r\n\t});\nwebApp.controller(\"PlanClassesController\",\r\n\tfunction($scope, $uibModal, classesService){\r\n\t\t\r\n\t\t$scope.classes = [];    \r\n        \r\n\t\tclassesService.getList().then(function (classes) {\r\n\t\t    $scope.classes = classes;\r\n\t\t    $scope.classesView = [].concat($scope.classes);\r\n\t\t});\r\n\t\t\r\n\t\t$scope.openClasse = function (classe) {\r\n\t\t\t//Il faut mettre l'idList dans $scope pour qu'il soit accessible dans resolve:\r\n\t\t\t$scope.classe = classe;\r\n\r\n\t\t\tvar modalDetails = $uibModal.open({\r\n\t\t\t\tanimation: true,\r\n\t\t\t\ttemplateUrl: \"modals/classesDetails.html\",\r\n\t\t\t\tcontroller: \"ClasseDetails\",\r\n\t\t\t\tsize: \"md\",\r\n\t\t\t\tresolve: {\r\n\t\t\t\t\tclasse: function () {\r\n\t\t\t\t\t\treturn $scope.classe;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tmodalDetails.result.then(function (classeP) {\r\n                if (classeP.toDelete) {\r\n                    classesService.remove(classeP).then(function() {\r\n                        updateTable();\r\n                    });\r\n                } else {\r\n                    classesService.save(classeP).then(function() {\r\n                        updateTable();\r\n                    });\r\n                }\r\n\t\t\t});\r\n\t\t};\r\n\t\t\r\n        $scope.delete = function(classe) {\r\n            classesService.remove(classe).then(function() {\r\n                updateTable();\r\n            });\r\n        }\r\n\r\n\t\tfunction updateTable() {\r\n\t\t    classesService.updateList().then(function() {\r\n\t\t        classesService.getList().then(function(classes) {\r\n\t\t            $scope.classes = classes;\r\n\t\t            $scope.classesView = [].concat($scope.classes);\r\n\t\t        });\r\n\t\t    });\r\n\t\t}\r\n\t});\nwebApp.controller(\"ClasseDetails\",\r\n\tfunction($scope, $timeout, $uibModalInstance, classesService, enseignantsService, classe){\r\n\r\n\t    enseignantsService.getList().then(function(data) {\r\n\t        $scope.enseignants = data;\r\n\t    });\r\n\r\n\t\t$scope.pickerDateDebut = {\r\n\t\t    opened: false\r\n\t\t}\r\n\t\t$scope.pickerDateFin = {\r\n\t\t    opened: false\r\n\t\t}\r\n\r\n\t\t$scope.openPickerDebut = function () {\r\n\t\t    $scope.pickerDateDebut.opened = true;\r\n\t\t};\r\n\t\t$scope.openPickerFin = function () {\r\n\t\t    $scope.pickerDateFin.opened = true;\r\n\t\t};\r\n        \r\n\t\t$scope.creation = classe ? false : true;\r\n\r\n        if(!$scope.creation){\r\n            classesService.getOne(classe.id).then(function (data){\r\n                $scope.classe = data;\r\n\t\t\t});\r\n        }\r\n        else {\r\n            $scope.classe = classesService.getNew();\r\n        }   \r\n\t\t\r\n        $scope.save = function () {\r\n            $scope.classe.toDelete = false;\r\n            $uibModalInstance.close($scope.classe);\r\n\t\t};\r\n\r\n        $scope.remove = function () {\r\n            $scope.classe.toDelete = true;\r\n            $uibModalInstance.close($scope.classe);\r\n\t\t}\r\n\r\n\t\t$scope.cancel = function () {\r\n\t\t\t$uibModalInstance.dismiss();\r\n\t\t};\r\n\t});\nwebApp.controller(\"PlanEnseignantsController\",\r\n\tfunction($scope, $uibModal, helper, enseignantsService){\r\n\t\t\r\n\t\t$scope.enseignants = [];\r\n\t\t$scope.matieres = [];\r\n\t\t$scope.showMatieresTable = false;\r\n\r\n\t    enseignantsService.getList().then(function(data) {\r\n\t        $scope.enseignants = data;\r\n\t        $scope.enseignantsView = [].concat($scope.enseignants);\r\n\t    });\r\n\t\t\r\n\t\t$scope.selectedEnseignant = {};\r\n\t\t\r\n\t\t$scope.select = function (enseignant) {\r\n\t\t    $scope.selectedEnseignant = helper.getObjectFromArray($scope.enseignants, \"id\", enseignant.id);\r\n\t\t    $scope.showMatieresTable = true;\r\n\t\t};\r\n\t\t\r\n\t\t$scope.removeMatiere = function(id){\r\n\t\t\t// A mettre dans une helper class?\r\n\t\t    $scope.selectedEnseignant.matieres = helper.deleteObjectFromArray($scope.selectedEnseignant.matieres, \"id\", id);\r\n\t\t\t$scope.selectedEnseignant.save();\r\n\t\t\tupdateTable();\r\n\t\t};\r\n\t\t\r\n\t\t$scope.showAddForm = function() {\r\n\t\t\tvar modalDetails = $uibModal.open({\r\n\t\t\t\tanimation : true,\r\n\t\t\t\ttemplateUrl:\"modals/listeMatieres.html\",\r\n\t\t\t\tcontroller: \"EnseignantsMatieresController\",\r\n\t\t\t\tsize: \"lg\",\r\n\t\t\t\twindowClass: \"container-fluid\",\r\n\t\t\t\tresolve:  {\r\n\t\t\t\t\tenseignant : function(){\r\n\t\t\t\t\t\treturn $scope.selectedEnseignant;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\t\t\r\n\t\t\t});\r\n\r\n\t\t\tmodalDetails.result.then(function (enseignantP) {\r\n\t\t\t    enseignantsService.save(enseignantP).then(function() {\r\n\t\t\t        updateTable();\r\n\t\t\t    });\r\n\t\t\t});\r\n\t\t};\r\n\t\t\r\n\t\tfunction updateTable(){\r\n\t\t    enseignantsService.updateList().then(function () {\r\n\t\t        enseignantsService.getList().then(function(data) {\r\n\t\t            $scope.enseignants = data;\r\n\t\t            $scope.enseignantsView = [].concat($scope.enseignants);\r\n\t\t        });\t\t\t\r\n\t\t\t});\r\n\t\t};\t\t\r\n\t});\nwebApp.controller(\"EnseignantsMatieresController\",\r\n\tfunction($scope, $uibModalInstance, helper, matieresService, enseignant){\r\n\t\t\r\n\t\t$scope.matieres = [];\r\n        $scope.enseignant = enseignant;\r\n\r\n\t    matieresService.getList().then(function(data) {\r\n\t        $scope.matieres = data;\r\n\t        $scope.matieresView = [].concat($scope.matieres);\r\n\t    });\r\n\t\t\r\n\t\t$scope.add = function(matiere) {\r\n\t\t\tif(!helper.getObjectFromArray($scope.enseignant.matieres,\"id\",matiere))\r\n\t\t\t{\r\n\t\t\t\t$scope.enseignant.matieres.push(matiere);\r\n\t\t\t}\t\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\t$scope.save = function() {\r\n\t\t    $uibModalInstance.close($scope.enseignant);\r\n\t\t}\r\n\t\t\r\n\t\t$scope.cancel = function(){\r\n\t\t\t$uibModalInstance.dismiss();\r\n\t\t}\t\t\r\n\t});\nwebApp.controller(\"PlanMatieresController\",\r\n\tfunction($scope, $uibModal, matieresService){\r\n        \r\n\t\t$scope.matieres = [];\r\n\r\n\t    matieresService.getList().then(function(data) {\r\n\t        $scope.matieres = data;\r\n\t        $scope.matieresView = [].concat($scope.matieres);\r\n\t    });\r\n\t\t\r\n\t\t$scope.open = function (matiere) {\r\n\t\t\t//Il faut mettre l'idList dans $scope pour qu'il soit accessible dans resolve:\r\n\t\t\t$scope.matiere = matiere;\r\n\r\n\t\t\tvar modalDetails = $uibModal.open({\r\n\t\t\t\tanimation: true,\r\n\t\t\t\ttemplateUrl: \"modals/matieresDetails.html\",\r\n\t\t\t\tcontroller: \"MatiereDetails\",\r\n\t\t\t\tsize: \"md\",\r\n\t\t\t\tresolve: {\r\n\t\t\t\t\tmatiere: function () {\r\n\t\t\t\t\t\treturn $scope.matiere;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tmodalDetails.result.then(function (matiereP) {\r\n                if (matiereP.toDelete) {\r\n                    $scope.remove(matiereP);\r\n                } else {\r\n                    matieresService.save(matiereP).then(function () {\r\n                        updateTable();\r\n                    });\r\n                }\r\n\t\t\t});\r\n\t\t};\r\n\t\t\r\n\t\t$scope.remove = function (matiere) {\r\n\t\t    matieresService.remove(matiere).then(function() {\r\n\t\t        updateTable();\r\n\t\t    });\r\n\t\t};\r\n        \r\n\t\tfunction updateTable() {\r\n\t\t    matieresService.updateList().then(function () {\r\n\t\t        matieresService.getList().then(function(matieres) {\r\n\t\t            $scope.matieres = matieres;\r\n\t\t            $scope.matieresView = [].concat($scope.matieres);\r\n\t\t        });\t        \r\n\t\t    });\r\n\t\t}\r\n\t});\nwebApp.controller(\"MatiereDetails\",\r\n\tfunction($scope, $timeout, $uibModalInstance,  matieresService, matiere){\r\n\t\t\r\n\t    $scope.matiere = {};\r\n\t    $scope.creation = matiere ? false : true;\r\n        \r\n        if(!$scope.creation){\r\n            matieresService.getOne(matiere.id).then(function (data) {\r\n                $scope.matiere = data;\r\n            });\r\n        }\r\n        else {\r\n            $scope.matiere = matieresService.getNew();\r\n        }\r\n        \r\n\t\t$scope.save = function () {\r\n\t\t    $scope.matiere.toDelete = false;\r\n            $uibModalInstance.close($scope.matiere);\r\n\t\t};\r\n        \r\n        $scope.remove = function () {\r\n            $scope.matiere.toDelete = true;\r\n            $uibModalInstance.close($scope.matiere);\r\n\t\t};\r\n        \r\n\t\t$scope.cancel = function () {\r\n\t\t\t$uibModalInstance.dismiss(\"Annuler\");\r\n\t\t};        \r\n\t});"],"names":[],"mappings":"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"}